<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>KIN 479: Human Motor Control – main-source-ch1-1_8</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">KIN 479: Human Motor Control</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assignments" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Assignments</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assignments">    
        <li>
    <a class="dropdown-item" href="../../../assignments/pres.html">
 <span class="dropdown-text">Presentation Guidelines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../assignments/pres-template.html">
 <span class="dropdown-text">Presentation Template</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://kin479-3t5d82oo7mixcokkbn6rzh.streamlit.app/"> 
<span class="menu-text">Study App</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<p>CHAPTER 1 Introduction OUTLINE Understanding Human Motor Control 2 Behavioral Science, Cognitive Science, Levels of Analysis 4 and Human Factors 7 Physiolog’)’, Neuroscience, Medicine, Fields Contributing to Research and Allied Fields 7 on Human Motor Control 6 Organization of the Book 7 Physics 6 Engineering 6 Summary 9 Statistics 7 How do we control the movements of our bodies? How do we walk, talk, sing, and smile? How do we manage to perform on the athletic field, play musical instruments, craft tools, and produce works of art? How do we learn to carry out these activities, and why are some of us better at them than others? What goes wrong when, through accident or disease, our ability to move is impaired? How can movement disabilities be restored or, better yet, prevented? And how can machines be made to carry out tasks that most people and animals perform effortlessly? As this list of questions suggests, understanding the control of body movements can have significant effects in a wide range of endeavors. This is hardly surprising given that move- ments occur in all walks of life. In sports, where moving skillfully is the very essence of the activity, an understanding of motor control can permit heightened levels of competition. In the fine arts, where performance on stage or in the studio permit self-expression, under- standing how movements are controlled can enhance the quality of that expression and can improve the training that leads to it. In medicine, where paralysis or lack of coordination can sabotage the quality of life, rehabilitation can be refined through deeper appreciation of the means by which the motor system functions. Finally, at home and in the workplace, where machines and other appliances are used, such devices can be made safer and more efficient through the application of principles gained through research on human motor control. Human lvfotor ContTol, Second Edit.ion 1 © 2010, Ehcticr Inc.&nbsp; 2 I. INTRODUCTION The question of how movements are controlled is just one of the questions in this field. The other major one is how we maintain stability. Holding an object steady in the face of changing wind conditions or while standing in a moving train are tasks that demand sta- bilization. Without muscular control, such tasks would be impossible. Because stabilization as well as movement are the jobs of the system covered here, we refer to that system as the motor system, not just the movement system or the stabilization system. The word “motor” has a connotation that is worth dismissing immediately. That conno- tation is machinelike rigidity. Conventional motors churn away monotonously, performing the same motions over and over again. By contrast, behavior is endlessly novel, reflecting millions of years of evolution in which effective strategies developed for adaptation to ever- changing conditions. If you doubt the sophistication of the motor system, consider the state of robots today. These devices embody much of what we know about motor control, but two-legged robots can barely walk across uneven surfaces without toppling over. Getting a robot to make a bed or fold laundry is out of the question. The inability of robots to plan and control physical actions as flexibly as people and ani- mals do means that people rather than robots are often called upon to perform in dangerous situations. Astronauts rather than robots typically carry out repairs in outer space. Beneath the earth, miners place themselves at risk as they pick away at unwieldy surfaces to extract coal or other minerals. On earth’s surface, people defuse mines and sift through rubble after earthquakes, floods, or bomb blasts. If we knew how people control their bodies, we could endow robots with programs that enable the robots to move as people do and carry out dan- gerous and boring tasks that people currently do. UNDERSTANDING HUMAN MOTOR CONTROL What does it mean to understand human motor control? What is to be understood and what form should the understanding take? The answers to these questions are not as obvi- ous as they might seem, for under normal circumstances, movement and stability just seem to happen. When things work well, it is easy to take them for granted. Indeed, a hallmark of skilled performance is that it occurs without the need for attention. When one thinks about performance, one’s performance often suffers (Wulf, 2007). By contrast, in abnormal circumstances, skills may be disrupted. Due to an accident or disease, the ability to move or stabilize the body may be impaired. A wide range of move- ment disorders afflict people, many of which will be discussed in this book. Considering these disorders and the factors that cause them can illuminate the factors that allow for nor- mal performance. That knowledge can in turn contribute to our understanding of motor control in general. What does it mean to understand motor control? One understands a system if one can predict and control it. We do not fully understand the weather, for example, because we cannot predict it, except at a gross level, and we cannot control the weather in any practical sense. On the other hand, we understand aeronautics well enough that we entrust our lives to airplanes traveling at breakneck speeds and at dizzying heights. HUMAN MOTOR CONTROL, 2 ED UNDERSTANDING HUMAN MOTOR CONTROL 3 Virtually all neurologically normal individuals can control their movements reasonably well, but none of these individuals can say in detail how they achieve that control. Most adults can ride a bicycle, for example, but none can say how they do so. Even Albert Einstein would have had to think for a while before saying how he managed to cycle. The fact that the principles of motor control cannot be easily articulated does not mean they can never be verbally expressed. The method for riding a bicycle has been written down: The rule observed by the cyclist is this. When he starts falling to the right he turns the handlebars to the right so that the course of the bicycle is deflected along a curve toward the right. This results in a centrifugal force pushing the cyclist to the left and offsets the gravitational force dragging him down to the right. This maneuver presently throws the cyclist out of balance to the left, which he counteracts by turning the han- dlebars to the left; and so he continues to keep himself in balance by winding along a series of appropriate curvatures. A simple analysis shows that for a given angle of unbalance the curvature of each winding is inversely proportional to the square of the speed at which the cyclist is proceeding [Polanyi, 1964, 49-50]. It is unlikely that Einstein drew on a verbal proposition like this one. The form of knowl- edge he probably relied on, and the form of knowledge that the rest of us use, is tacit or implicit knowledge (Polanyi, 1964). By seeing that the knowledge underlying bike riding and other motor activities can be verbalized, we see that understanding motor control involves being able to state the prin- ciples of motor control. Ultimately, a theory of motor control will have to be expressed in a form that lets the theory be communicated in books such as this one and in scientific articles. In other words, it will have to verbalized. What form should that verbalized theory take? It is possible to demonstrate one’s understanding of a system by simulating it. In the case of motor control, such a demonstration can take the form of a robot that moves in a way that is indistinguishable from the way neurologically normal people do. Such a robot would pass the Turing test of motor intelligence. The term Turing test re.fers to a method of judg- ing intelligence. The test was developed by Alan Turing, a mathematician and philosopher who helped crack the secret code used by the Nazis in World War II. Turing proposed a test for understanding verbally expressed intelligence. In the test, a human participant-call her Elana-interacts with a computer or with another person via a keyboard and display. The critical feature of the setup is that Elana does not know “vith whom she is dealing, a person or a computer. Based on the interactions, she tries to determine whether the individual is a computer or a person. If Elana cannot tell that she is interacting with a computer though her correspondent is in fact a machine, one can say that the designer of the computer succeeded in designing a machine that is as intelligent as a person. A Turing test of motor intelligence would work in similar ways. If Elana watched a robot dancing and thought it was a human being, she could say the designer of the dancing robot had captured, and truly understood, the control of dance. Are we near such a demonstration? Humanoid robots developed by Mitsuo Kawato and his colleagues at the ATR Laboratories in Japan come close to passing the Turing test. One of those robots is shown in Figure 1.1. The robot shown in this figure can play air hockey as well as most people can. Even more interestingly, it does so in a way that is amazingly lifelike. If you find and watch a video of this robot on the world-wide web, be mindful that the person playing against the robot can do something the robot can’t. The person can walk away, stroll down the hall, and, if he hears a child crying out for help in a room he passes, he HUMAN MOTOR CONTROL, 2 ED 4 I. INTRODUCTION FIGURE 1.1 A humanoid robot playing air hockey with a person. From http://lasa.epfl.ch/events/events/ iros03workshop/ AirHockey.jpg. can enter the room and pull the child out from the shelf and pile of books that have landed on him when he decided to climb up on his mother’s bookcase. The robot, by contrast, can do just what it was programmed to do and no more. LEVELS OF ANALYSIS Reflecting on the air-hockey-playing robot, you might say that the lifelike performance of this robot is of only moderate interest, for human beings are made of flesh and blood, whereas robots, or at least robots like the air-hockey-playing robot shown in Figure 1.1, are made of synthetic materials. Doesn’t that difference make the comparison between people and robots irrelevant to the understanding of human motor control? The fact that one actor is real and the other is not does not mean that similarities between them are irrelevant. Apart from the fact that it is fun to watch a machine behave as people do, the deeper reason why robots and people are worth comparing is that different levels of analysis characterize the study of human motor control. Understanding these levels of analysis helps us appreciate why it useful to compare robots to people and animals. David Marr (1982) proposed three levels of understanding for the study of such systems. One level of analysis that Marr identified was the computational level. This level, according to Marr, consists of a description, often expressed mathematically, of one or more functions that a system is supposed to achieve. The cartoon in Figure 1.2 illustrates the computational level. Here a cat prepares to jump onto a table. At some level, the cat’s planning can be rep- resented in equations and diagrams of the sorts that physicists write, although of course the cat does not explicitly use such equations anymore than people do, or, presumably, any HUMAN MOTOR CONTROL, 2 ED LEVELS OF ANALYSIS 5 ’ FIGURE 1.2 The computational level of analysis in motor control. From http://www.thenewyorkerstore.com/ assets/I/ 46752_t.gif. more than Einstein did when he rode his bicycle or carried out other physical activities. Even if equations are not used explicitly, they are used implicitly in performance. The compu- tational level of analysis is concerned with those implicit equations. How the cat actually jumps onto the table is left out of the computational description. The cat might crouch, leap up, prepare to land, and then use its sense of touch to check that it has landed. These behavioral and cognitive states constitute the second of Marr’s levels, what can be called the procedural level. This term is used because it concerns events that occur in real time. (Marr actually used the term algorithmic level, but algorithms are guar- anteed to work. Not all procedures do; getting a basketball to go through a net is not a sure thing, though it relies on a procedure.) The third of Marr’s levels is the implementation level. Here what counts is the physical stuff that permits procedures to be physically achieved. In the case of the jumping cat, the questions relevant to the implementation level are how muscles contract and relax, which brain regions become active or inactive, and so on. If the cat were robotic rather than mam- malian, the relevant issues would be how the hydraulics of the actuators should be used, how the robot’s battery power should be drawn on, and so on. Having identified the three levels in Marr’s triptych-the computational level, the pro- cedural level, and the implementation level-we can now ask”vhich of those three levels is most important in the study of human motor control. One way to address this question is to ask what would happen if any of the levels were excluded. If the implementation level were excluded, most medical conditions involving motor con- trol would be forgotten. No one would want that to happen, of course. We want advances in motor control to help people overcome motor-control difficulties. HUMAN MOTOR CONTROL, 2 ED 6 I. INTRODUCTION If the algorithmic level were excluded, most studies of effective training procedures would be left by the wayside, as would research in the field of human factors-designing safer roads, smarter computer interfaces, and so on. Again, this is not what one would want. Finally, if the computational level were excluded, most efforts to advance robotics would be abandoned. This, too, would be undesirable, for even if you have qualms about robots- perhaps you feel they will take over the jobs of too many people-computational work is of great importance. Thus, the understanding of human motor control requires work at all three levels. No level is more important than any other. All of the levels should be pursued and respected. FIELDS CONTRIBUTING TO RESEARCH ON HUMAN MOTOR CONTROL If all three levels of analysis contribute to the understanding of human motor control, one would expect fields that pursue any of the levels to contribute to this field of study. This is indeed the case, making human motor control a truly interdisciplinary area. Physics As mentioned earlier, physics plays a key role in the study of human motor control. This makes sense, considering that there are physical constraints on what we can do. We can only jump so high, run so fast, push so hard, and so on. Physics helps determine the factors that limit performance. Physics can also indicate the factors that enable performance. A skillful baseball batter can learn how to use the momentum of her bat to maximize the force she exerts on the oncom- ing ball, and she can learn to hit the ball on the bat’s “sweet spot,” where bounce-back is maximized. Similarly, a cat preparing to jump onto a table can learn how to drop on its haunches before leaping up, exploiting elastic energy (Alexander, 1992). Engineering The computational style of analysis used by physicists in their theoretical work has also been used by engineers in their applied work. Men and women in engineering use physical principles to solve practical problems such as designing bridges that don’t fall or designing computers that don’t forget. Engineers also work on issues related to motor control such as robotics and prostheses (artificial appendages used by amputees). One issue that engineers have worked on a great deal is how to use feedback effectively. Feedback is crucial for effective motor control, whether the performance entails standing on a moving train, chasing a fly ball, or driving an automobile. The approach to the analysis of feedback that engineers have developed is called control theory. HUMAN MOTOR CONTROL, 2 ED ORGANIZATJO,’I OF THE BOOK 7 Statistics If you take a pencil and move the tip back and forth as quickly as possible between two target points, always lifting the pencil between the hits, you will end up with a cloud of points near each target. These clouds show that, despite your best intentions, your perform- ance is not perfect. No one’s is. Everyone’s performance is variable to some degree. The study of variability as well as other features of data is the focus of statistics. Some important recent advances in the understanding of human motor control have been made possible through the application of statistics to motor control research. Behavioral Science, Cognitive Science, and Human Factors Researchers who study the procedural level of human motor control work in the fields of behavioral science, cognitive science, and human factors. Behavioral scientists study overt physical activity to predict and, on occasion, control behavior. Cognitive scientists are also interested in the procedural level, but are especially interested in the internal processes that allow behavior to unfold. Cognitive scientists often say they are interested in the software that makes behavior possible. Human factors specialists are interested in the applications of behavioral and cognitive science to practical problems such as desi.gning easy-to-understand road signs, easy-to-use computer interfaces, and easy-to-manipulate hand tools. Scientists in these fields work in academic departments, such as departments of psychology, industrial engineering, physical education, or kinesiology, or in companies or governmental agencies. Chapter 4 provides an overview of behavioral science, cognitive science, and human factors approaches to human motor control. Physiology, Neuroscience, Medicine, and Allied Fields People who study the implementation level of motor control in biological systems are most often associated with physiology. Physiologists interested in motor control focus on mus- cle, bones, and joints, as well as the main regulator of muscle activity, the nervous system, which is the province of neuroscience. The practitioners who apply this information in the clinic are neurologists (who diagnose and treat ailments of the nervous system), orthopedists (who diagnose and treat disorders of bones and joints), physical therapists (who help restore motion and stability through behavioral rehabilitation), and prostheticians (who craft and fit artificial limbs for people with amputations). Rudiments of physiology, neuroscience, medi- cine, and allied fields that pertain to human motor control will be presented in Chapter 3. ORGANIZATION OF THE BOOK This book has three main parts. The first is introductory. It contains, besides this chap- ter, Chapter 2 (Core Problems), Chapter 3 (Physiological Foundations), and Chapter 4 (Psychological Foundations). HUMAN MOTOR CONTROL, 2 ED 8 I. INTRODUCTION The second part is organized by activity. Within it, Chapter 5 is concerned with walk- ing and related forms of locomotion. Chapter 6 is concerned with looking, or more specifi- cally, the control of eye and head movements. Chapter 7 focuses on reaching and grasping. Chapter 8 treats the control of drawing and writing. Chapter 9 covers keyboarding (i.e., the control of typewriting, text-messaging, piano playing, and other finger-movement tasks). Chapter 10 covers the control of speaking and singing. Chapter 11, the last chapter in Part II, is concerned with smiling and other forms of facial expression. The third part of the book has a single chapter, Moving On. This chapter presents new advances and new challenges that newcomers to the field may wisih to take up. You should know why the book is organized as it is and why the book has the title it has. Regarding organization, and in particular the devotion of much of the book to distinct activ- ities (Chapters 5-11), this approach has several advantages. One is that research in motor control, like research in most fields today, has become specialized. It is not really a carica- ture of the field to say that there are people who work entirely on eye movements, others who work entirely on reaching and grasping, others who work entirely on speech, and so forth. The proliferation of subspecialties within motor-control research derives partly from the practical and theoretical interests of workers in the field. Practical concerns with particu- lar tasks sometimes compel investigators to pursue particular task domains at the expense of others. A researcher working for a computer company, for example, is likely to be more interested in keyboarding than in singing. Theoretical interests also place some investigators on circumscribed research paths. Students of vision, for example, are naturally more inter- ested in oculomotor (eye movement) control than in speech. The second reason for devoting separate chapters to separate activities is that many of the specialty areas have developed their own problems and methodologies. The twists and turns in one area do not always map easily onto the lines of study in another area, so rather than risk losing the richness of particular areas of study, each area is paid its due by being considered on its own. In treating the subsystems separately, it is critical that the treatment not become too parochial. Areas of common concern need to be highlighted, as does work on the coor- dination of different motor tasks. Being on the lookout for similarities between the motor subsystems puts one in an advantageous position for detecting differences between them. That there might be differences is a real and intriguing possibility, given that some proc- esses may be controlled by independent modules with their own rules of operation (Fodor, 1983). If modularity applies to the motor system, different motor activities might be con- trolled in wholly different ways. Treating the motor activities separately makes it possible to identify those differences if they exist or note their absence if they might otherwise be expected. Regarding the title of the book, Human Motor Control, many but not all of the activities that are discussed here can be carried out only by people, but many of the activities can also be carried out by non-human animals. The word “human” is included in the title even though animal research is discussed throughout the volume. Animal work is important to the understanding of human motor control (and vice versa). The use of the term “motor control” also requires justification, for one might wonder whether there really is a system responsible for motor activity, separate from other systems HUMAN MOTOR CONTROL, 2 ED</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>